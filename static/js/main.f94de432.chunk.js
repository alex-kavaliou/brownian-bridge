(this["webpackJsonpbrownian-bridge"]=this["webpackJsonpbrownian-bridge"]||[]).push([[0],{190:function(t,e,n){},535:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),o=n(36),r=n.n(o),s=n(4),c=n(136),l=n.n(c),u=n(194),h=n.n(u),d=n(134),f=n.n(d),j=n(135),b=n.n(j),g=n(126),m=n.n(g),v=n(66),O=n.n(v),y=n(199),p=n.n(y),x=n(202),w=n.n(x),S=n(543),C=n(107),L=n.n(C),k=n(71),T=n(45),M=n(538),A=n(540),R=n(15),B=n(16),Y=n(35);var D=Object(R.a)((function t(){var e=this;return Object(B.a)(this,t),this.data=void 0,this.svg=void 0,this.xType=void 0,this.yType=void 0,this.width=void 0,this.height=void 0,this.marginTop=void 0,this.marginRight=void 0,this.marginBottom=void 0,this.marginLeft=void 0,this.xRange=void 0,this.yRange=void 0,this.X=void 0,this.Y=void 0,this.I=void 0,this.xScale=void 0,this.yScale=void 0,this.xAxis=void 0,this.yAxis=void 0,this.memo=void 0,this.listeners=void 0,this.initilized=void 0,this.xFormat=void 0,this.yFormat=void 0,this.xDomain=[0,1],this.yDomain=[-2,2],this.color="currentColor",this.strokeLinecap="round",this.strokeLinejoin="round",this.strokeWidth=1.5,this.strokeOpacity=1,this.yLabel="Y",this.mouseDown=!1,this.initilize=function(t,n,i){e.data=t,e.svg=n,e.width=i.width,e.height=i.height,e.xType=Y.g,e.yType="scaleLinear"===i.yType?Y.g:Y.h,e.marginTop=i.margin.top,e.marginRight=i.margin.right,e.marginBottom=i.margin.bottom,e.marginLeft=i.margin.left,e.initilized=!0},this.subscribe=function(t,n){e.listeners[t]||(e.listeners[t]=new Set);var i=e.listeners[t];return i.add(n),function(){i.delete(n),0===i.size&&delete e.listeners[t]}},this.broadcast=function(t){if(e.listeners[t]){for(var n=e.listeners[t],i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];for(var r=0,s=Array.from(n);r<s.length;r++){var c=s[r];c.apply(null,a)}}},this.calculateScale=function(){console.log("calculateScale"),e.xRange=[e.marginLeft,e.width-e.marginRight],e.yRange=[e.height-e.marginBottom,e.marginTop],e.xScale=e.xType(e.xDomain,e.xRange),e.yScale=e.yType(e.yDomain,e.yRange),e.xAxis=Y.a(e.xScale).ticks(e.width/50).tickSizeOuter(0),e.yAxis=Y.b(e.yScale).ticks(e.height/50,e.yFormat)},this.mouseMove=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=0,i=function(){n||(t.apply(void 0,arguments),n=setTimeout((function(){return n=0}),e))};return i}((function(t){if(console.log(t.type,"ff"),"mousedown"===t.type&&(e.mouseDown=!0),e.mouseDown){console.log(t.pageX,e.xScale.invert(60),e.marginLeft,"this.marginLeft");var n=Y.c(e.X,e.xScale.invert(t.pageX-e.svg.property("parentNode").offsetLeft));e.listeners&&e.X&&e.Y&&e.broadcast("controllerPositionMove",{x:e.X[n].toFixed(2),y:e.Y[n].toFixed(2)})}}),100),this.mouseLeave=function(){e.mouseDown=!1,console.log("mouseLeave")},this.drawContainer=function(){e.calculateScale(),Y.i(".controllerPosition").on("mousedown",e.mouseMove),Y.i("#controllerContainer").on("mousemove",e.mouseMove).on("mouseup",e.mouseLeave),e.svg.attr("width",e.width).attr("height",e.height),e.svg.append("g").attr("transform","translate(0,".concat(e.height-e.marginBottom,")")).call(e.xAxis),e.svg.append("g").attr("transform","translate(".concat(e.marginLeft-30,",0)")).call(e.yAxis).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll(".tick line").clone().attr("x2",e.width-e.marginLeft).attr("stroke-opacity",.1)})).call((function(t){return t.append("text").attr("x",-e.marginLeft).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(e.yLabel)}))},this.drawLine=function(t){console.log("drawLine"),e.data=t,e.X=Y.e(t.points,(function(t){return t.x})),e.Y=Y.e(t.points,(function(t){return t.y})),e.I=Y.f(e.X.length);var n=Y.d().x((function(t){return e.xScale(e.X[t])})).y((function(t){return e.yScale(e.Y[t])}));e.svg.append("path").attr("fill","none").attr("stroke",e.color).attr("stroke-width",e.strokeWidth).attr("stroke-linecap",e.strokeLinecap).attr("stroke-linejoin",e.strokeLinejoin).attr("stroke-opacity",e.strokeOpacity).attr("d",n(e.I))},this.changeScaleType=function(t){console.log("changeScaleType"),e.yType="scaleLinear"===t?Y.g:Y.h,e.drawContainer(),e.drawLine(e.data)},this.clearChart=function(){console.log("clearChart"),e.svg.selectChildren().remove()},this.clearLine=function(){console.log("clearLine"),e.svg.selectAll("path").remove()},console.log("constructor"),"object"===typeof t.instance?t.instance:(this.listeners={},t.instance=this)}));D.instance=void 0;var X=n(11),E=new D,N=function(t){var e=t.calculateBridge,n=t.onResetData,a=t.onChangeSigma,o=t.sigma,r=t.onChangeAmountPoints,c=t.amountPoints,l=t.typeChart,u=t.handleSelectTypeChart,d=Object(i.useState)({x:"0.00",y:"0.00"}),j=Object(s.a)(d,2),g=j[0],v=j[1],y="Number of points to generate a graph",x="Standard deviation";return Object(i.useEffect)((function(){return E.subscribe("controllerPositionMove",(function(t){return v(t)}))}),[]),Object(X.jsx)("div",{className:"controller",children:Object(X.jsxs)(m.a,{direction:"vertical",size:"middle",style:{display:"flex",padding:30},children:[Object(X.jsx)(p.a.Title,{level:4,style:{color:h.a?"#000000":"#ffffff"},children:"Controllers"}),Object(X.jsx)(f.a,{onClick:e,type:"primary",block:!0,children:"Calculate new Brownian bridge"}),Object(X.jsx)(f.a,{onClick:n,type:"primary",block:!0,children:"Reset"}),Object(X.jsx)(b.a,{controls:!0,min:10,max:2e4,step:"100",defaultValue:c,onChange:r,style:{width:"100%"},addonBefore:"Points:",addonAfter:Object(X.jsx)(O.a,{title:y,children:Object(X.jsx)(S.a,{})})}),Object(X.jsxs)(k.a,{children:[Object(X.jsx)(T.a,{span:11,children:Object(X.jsx)(b.a,{min:0,max:5,step:.1,controls:!1,value:o,onChange:a,style:{width:"100%"},addonBefore:"Sigma:",addonAfter:Object(X.jsx)(O.a,{title:x,children:Object(X.jsx)(S.a,{})})})}),Object(X.jsx)(T.a,{span:13,children:Object(X.jsx)(w.a,{value:o,onChange:a,max:5,min:0,step:.1})})]}),Object(X.jsxs)(L.a.Group,{value:l,onChange:u,children:[Object(X.jsx)(L.a.Button,{value:"scaleLinear",children:"scaleLinear"}),Object(X.jsx)(L.a.Button,{value:"scaleLog",children:"scaleLog"})]}),Object(X.jsx)(M.a,{children:Object(X.jsx)(A.a,{title:"Position",value:g.x,prefix:"x:",suffix:"/ y:".concat(g.y)})})]})})},P=Object(i.memo)(N),z=n(1),V=function(){var t=null,e=null,n=null;if(null!=t)n=t,t=null;else do{e=(t=2*Math.random()-1)*t+(n=2*Math.random()-1)*n}while(!e||e>1);return n*Math.sqrt(-2*Math.log(e)/e)},F=(n(190),n(541)),I=n(539),H=n(544),q=n(542),W=function(t){var e=t.setY1,n=t.setY2,a=t.height,o=t.width,r=t.y1,c=t.y2,l=t.margin,u=t.children,h=Object(i.useRef)(null),d=Object(i.useState)(!1),f=Object(s.a)(d,2),j=f[0],b=f[1],g=Object(i.useState)(l.left),m=Object(s.a)(g,2),v=m[0],O=m[1],y=Object(i.useState)(0),p=Object(s.a)(y,2),x=p[0],w=p[1],S={position:"absolute",bottom:l.bottom-11,transform:"translateX(-50%)",left:v,cursor:j?"grabbing":"grab",zIndex:9},C={position:"absolute",bottom:16,left:10,width:1,height:a-l.top-l.bottom-16,backgroundColor:"grey"},L={position:"absolute",height:a-l.top-l.bottom,top:l.top-4};return Object(i.useEffect)((function(){h.current&&(console.log(h.current.offsetLeft,"controller.current.offsetLeft"),w(h.current.offsetLeft+l.left))}),[h.current,l.left]),Object(X.jsxs)("div",{id:"controllerContainer",style:{position:"relative",maxWidth:"fit-content",maxHeight:500},onMouseMove:function(t){if(j&&h.current){var e=t.pageX-x+l.left;O((function(t){return e>=l.left&&e<=o-l.right?e:t}))}},onMouseUp:function(){b(!1)},ref:h,children:[Object(X.jsx)("div",{style:Object(z.a)(Object(z.a)({},L),{},{left:l.left-16}),children:Object(X.jsx)(q.a,{className:"chart-slider",vertical:!0,defaultValue:r,onChange:e,max:2,min:-2,step:.01})}),Object(X.jsxs)("div",{className:"controllerPosition",style:S,onMouseDown:function(){b(!0)},children:[Object(X.jsx)("span",{style:C}),Object(X.jsx)(H.a,{style:{transform:"rotate(270deg)",padding:4}})]}),Object(X.jsx)("div",{style:Object(z.a)(Object(z.a)({},L),{},{left:l.left+900-16}),children:Object(X.jsx)(q.a,{className:"chart-slider",vertical:!0,defaultValue:c,onChange:n,max:2,min:-2,step:.01})}),u]})},J=Object(i.memo)(W),G=Object(i.forwardRef)((function(t,e){var n=t.setY1,i=t.setY2,a=t.height,o=t.width,r=t.y1,s=t.y2,c=t.margin;return Object(X.jsxs)(F.a,{className:"site-layout",children:[Object(X.jsx)(F.a.Header,{className:"site-layout-background",children:Object(X.jsx)(I.a.Title,{level:2,style:{marginBottom:0},children:"Brownian bridge"})}),Object(X.jsx)(F.a.Content,{style:{margin:"16px"},children:Object(X.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:Object(X.jsx)(J,{setY1:n,setY2:i,height:a,width:o,y1:r,y2:s,margin:c,children:Object(X.jsx)("svg",{ref:e})})})}),Object(X.jsx)(F.a.Footer,{style:{textAlign:"center"},children:"\xa92022 Created by Modsen"})]})})),U=Object(i.memo)(G),K=function(){var t=new Map;return function(e,n){var i=t.get(e);if(i){if(i.id===n.id)return i;t.clear()}for(var a=n.points.length-1,o=1/a,r=Math.sqrt(o),s=[n.points[0]],c=0;c<a-1;c++){var l=c*o,u=(n.mu+e*n.points[c+1].randomValue)*r,h=s[c].y*(1-o/(1-l))+u;s[c+1]={x:1/a*(c+1),y:h,randomValue:n.points[c+1].randomValue}}s[a]=n.points[a],s.forEach((function(t,e){s[e]=Object(z.a)(Object(z.a)({},t),{},{y:e===s.length-1?t.y:t.y+n.m[e]})}));var d=Object(z.a)(Object(z.a)({},n),{},{points:s});return t.set(e,d),d}}(),Q=new D,Z=function(){var t=Object(i.useState)(!1),e=Object(s.a)(t,2),n=e[0],a=e[1],o=Object(i.useState)(null),r=Object(s.a)(o,2),c=r[0],u=r[1],h=Object(i.useState)(100),d=Object(s.a)(h,2),f=d[0],j=d[1],b=Object(i.useState)(1),g=Object(s.a)(b,2),m=g[0],v=g[1],O=Object(i.useState)(0),y=Object(s.a)(O,2),p=y[0],x=y[1],w=Object(i.useState)(0),S=Object(s.a)(w,2),C=S[0],L=S[1],k=Object(i.useState)(500),T=Object(s.a)(k,1)[0],M=Object(i.useState)(600),A=Object(s.a)(M,1)[0],R=Object(i.useState)({top:20,bottom:30,left:60,right:40}),B=Object(s.a)(R,1)[0],D=Object(i.useState)("scaleLinear"),E=Object(s.a)(D,2),N=E[0],F=E[1],I=Object(i.useRef)(null),H=Object(i.useCallback)((function(t){j(t)}),[]),q=Object(i.useCallback)((function(t){v(t)}),[]),W=Object(i.useCallback)((function(t){F(t.target.value)}),[F]),J=Object(i.useCallback)((function(){n&&Q.clearLine(),u(null)}),[]),G=Object(i.useCallback)((function(){var t=function(t,e){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=[0],o=1/t,r=[{x:0,y:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,randomValue:0}],s=0;s<t-1;s++){var c=s*o;a.push(n*c);var l=V(),u=(i+e*l)*Math.sqrt(o),h=r[s].y*(1-o/(1-c))+u;r[s+1]={x:1/t*(s+1),y:h,randomValue:l}}return r[t]={x:1,y:n,randomValue:0},r.forEach((function(t,e){r[e]=Object(z.a)(Object(z.a)({},t),{},{y:e===r.length-1?t.y:t.y+a[e]})})),{id:Math.random(),m:a,points:r,mu:0,sigma:e}}(f,m,p,C);u(t)}),[f,m,p,C]);return Object(i.useEffect)((function(){G()}),[p,C]),Object(i.useEffect)((function(){if(c){var t=K(m,c);u(t)}}),[m]),Object(i.useEffect)((function(){n&&c&&(Q.clearLine(),Q.drawLine(c))}),[n,c]),Object(i.useEffect)((function(){var t=Y.i(I.current);I.current&&c&&(console.log("start"),Q.initilize(c,t,{yType:N,width:1e3,height:500,margin:B}),Q.drawContainer(),a(Q.initilized))}),[I.current]),Object(i.useEffect)((function(){n&&(Q.clearChart(),Q.changeScaleType(N))}),[n,N]),Object(X.jsxs)(l.a,{style:{minHeight:"100vh"},children:[Object(X.jsxs)(l.a.Sider,{width:"400",children:[Object(X.jsx)("div",{className:"logo"}),Object(X.jsx)(P,{onResetData:J,calculateBridge:G,onChangeSigma:q,onChangeAmountPoints:H,handleSelectTypeChart:W,amountPoints:f,sigma:m,typeChart:N})]}),Object(X.jsx)(U,{setY1:x,setY2:L,height:T,width:A,margin:B,y1:p,y2:C,data:c,ref:I})]})};n(534);r.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(Z,{})}),document.getElementById("root"))}},[[535,1,2]]]);
//# sourceMappingURL=main.f94de432.chunk.js.map